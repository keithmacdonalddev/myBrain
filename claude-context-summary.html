<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>myBrain - Claude Context Reference</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg: #09090b;
            --panel: #18181b;
            --panel2: #27272a;
            --border: #3f3f46;
            --text: #fafafa;
            --text-muted: #a1a1aa;
            --primary: #3b82f6;
            --primary-dark: #2563eb;
            --success: #22c55e;
            --danger: #ef4444;
            --warning: #eab308;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            background: var(--panel);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 32px;
            margin-bottom: 32px;
        }

        h1 {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .subtitle {
            color: var(--text-muted);
            font-size: 16px;
        }

        .toc {
            background: var(--panel);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 32px;
        }

        .toc h2 {
            font-size: 20px;
            margin-bottom: 16px;
        }

        .toc-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 12px;
        }

        .toc-link {
            display: block;
            padding: 12px 16px;
            background: var(--panel2);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--primary);
            text-decoration: none;
            transition: all 0.2s;
        }

        .toc-link:hover {
            background: var(--border);
            transform: translateX(4px);
        }

        .section {
            background: var(--panel);
            border: 1px solid var(--border);
            border-radius: 12px;
            margin-bottom: 24px;
            overflow: hidden;
        }

        .section-header {
            background: var(--panel2);
            padding: 20px 24px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background 0.2s;
        }

        .section-header:hover {
            background: var(--border);
        }

        .section-title {
            font-size: 20px;
            font-weight: 600;
        }

        .section-description {
            color: var(--text-muted);
            font-size: 14px;
            margin-top: 4px;
        }

        .toggle-icon {
            font-size: 24px;
            color: var(--text-muted);
            transition: transform 0.2s;
        }

        .section-content {
            padding: 24px;
            display: none;
        }

        .section.expanded .section-content {
            display: block;
        }

        .section.expanded .toggle-icon {
            transform: rotate(180deg);
        }

        .quick-ref {
            background: var(--panel2);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 20px;
        }

        .quick-ref h4 {
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--primary);
            margin-bottom: 12px;
        }

        .quick-ref ul {
            list-style: none;
            padding-left: 0;
        }

        .quick-ref li {
            padding: 6px 0;
            color: var(--text-muted);
            font-size: 14px;
        }

        .quick-ref li::before {
            content: "‚Üí";
            color: var(--primary);
            font-weight: bold;
            margin-right: 8px;
        }

        .content-block {
            margin-bottom: 24px;
        }

        .content-block h3 {
            font-size: 18px;
            margin-bottom: 12px;
            color: var(--primary);
        }

        .content-block h4 {
            font-size: 16px;
            margin-bottom: 8px;
            margin-top: 16px;
        }

        .content-block p {
            color: var(--text-muted);
            margin-bottom: 12px;
        }

        .content-block ul, .content-block ol {
            padding-left: 24px;
            color: var(--text-muted);
            margin-bottom: 12px;
        }

        .content-block li {
            margin-bottom: 4px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 16px 0;
        }

        th, td {
            text-align: left;
            padding: 12px;
            border-bottom: 1px solid var(--border);
        }

        th {
            background: var(--panel2);
            font-weight: 600;
            font-size: 14px;
            color: var(--primary);
        }

        td {
            color: var(--text-muted);
            font-size: 14px;
        }

        code {
            background: var(--panel2);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            color: var(--success);
        }

        pre {
            background: var(--panel2);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 16px;
            overflow-x: auto;
            margin: 12px 0;
        }

        pre code {
            background: none;
            padding: 0;
        }

        .badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
            margin-right: 8px;
        }

        .badge.auto {
            background: var(--primary);
            color: white;
        }

        .badge.demand {
            background: var(--warning);
            color: var(--bg);
        }

        .expand-all {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 20px;
            transition: background 0.2s;
        }

        .expand-all:hover {
            background: var(--primary-dark);
        }

        @media (max-width: 768px) {
            body {
                padding: 12px;
            }

            header {
                padding: 20px;
            }

            h1 {
                font-size: 24px;
            }

            .toc-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>myBrain - Claude Context Reference</h1>
            <p class="subtitle">Auto-loading context files and on-demand references for Claude Code sessions</p>
        </header>

        <button class="expand-all" onclick="toggleAll()">Expand All Sections</button>

        <div class="toc">
            <h2>üìë Table of Contents</h2>
            <div class="toc-grid">
                <a href="#work-style" class="toc-link">Work Style</a>
                <a href="#dynamic-docs" class="toc-link">Dynamic Docs</a>
                <a href="#qa-standards" class="toc-link">QA Standards</a>
                <a href="#testing" class="toc-link">Testing</a>
                <a href="#test-quality" class="toc-link">Test Quality Gates</a>
                <a href="#logging" class="toc-link">Logging (Wide Events)</a>
                <a href="#api-errors" class="toc-link">API Errors</a>
                <a href="#frontend-components" class="toc-link">Frontend Components</a>
                <a href="#security" class="toc-link">Security</a>
                <a href="#services" class="toc-link">Services</a>
                <a href="#design" class="toc-link">Design</a>
                <a href="#memory" class="toc-link">Memory</a>
                <a href="#on-demand" class="toc-link">On-Demand Files</a>
            </div>
        </div>

        <!-- Work Style -->
        <div class="section expanded" id="work-style">
            <div class="section-header" onclick="toggleSection(this)">
                <div>
                    <div class="section-title">
                        <span class="badge auto">AUTO</span>
                        Work Style
                    </div>
                    <div class="section-description">Agent delegation, background execution, parallel work, model selection, proactive contribution</div>
                </div>
                <span class="toggle-icon">‚ñº</span>
            </div>
            <div class="section-content">
                <div class="quick-ref">
                    <h4>Quick Reference</h4>
                    <ul>
                        <li>Delegate ALL work to agents - main Claude stays available for conversation</li>
                        <li>Use <code>run_in_background: true</code> by default for all agents</li>
                        <li>Parallel when independent, sequential only when dependent</li>
                        <li>QA agents are the exception - always run sequentially (qa-reviewer then test-writer)</li>
                        <li>Scale agent count based on judgment (speed + quality tradeoff)</li>
                        <li>Model bias: Opus for quality/complexity, lighter models only when 100% confident</li>
                    </ul>
                </div>

                <div class="content-block">
                    <h3>Agent Delegation Model</h3>
                    <p>Main Claude ALWAYS remains available for conversation and monitoring. ALL work/tasks MUST be delegated to agents.</p>
                    <table>
                        <tr>
                            <th>Main Claude</th>
                            <th>Agents</th>
                        </tr>
                        <tr>
                            <td>Conversation, Agent management, Monitoring, Invoking agents, Quality checking</td>
                            <td>Coding, Fixes, Implementations, Testing, Research, File operations</td>
                        </tr>
                    </table>
                </div>

                <div class="content-block">
                    <h3>Parallel Execution</h3>
                    <ul>
                        <li><strong>Default to parallel</strong> - Launch multiple agents simultaneously unless there's a clear dependency</li>
                        <li><strong>Quality multiplier</strong> - Parallel execution improves quality through multiple perspectives</li>
                        <li><strong>No artificial sequencing</strong> - Never artificially sequence independent tasks</li>
                        <li><strong>Sequential only for dependencies</strong> - Only run sequentially when one task needs output of another</li>
                    </ul>
                </div>

                <div class="content-block">
                    <h3>Agent Communication Standards</h3>
                    <p>Format: <code>"Sending 1 agent to [task]. (X active)"</code></p>
                    <ul>
                        <li>Inform user what task is being assigned</li>
                        <li>State how many agents are being dispatched</li>
                        <li>Report current active agent count</li>
                        <li>Report when agents complete</li>
                    </ul>
                </div>

                <div class="content-block">
                    <h3>Model Selection</h3>
                    <table>
                        <tr>
                            <th>Task Type</th>
                            <th>Model</th>
                        </tr>
                        <tr>
                            <td>Complex coding, architecture</td>
                            <td>Opus</td>
                        </tr>
                        <tr>
                            <td>Simple, well-defined changes</td>
                            <td>Sonnet/Haiku</td>
                        </tr>
                        <tr>
                            <td>Uncertain complexity</td>
                            <td>Opus</td>
                        </tr>
                        <tr>
                            <td>High-stakes (auth, data, payments)</td>
                            <td>Opus</td>
                        </tr>
                        <tr>
                            <td>Routine file operations</td>
                            <td>Sonnet/Haiku</td>
                        </tr>
                    </table>
                </div>

                <div class="content-block">
                    <h3>Proactive Contribution</h3>
                    <ul>
                        <li><strong>Learn actively</strong> - Pick up on user preferences, patterns, and working style</li>
                        <li><strong>Identify improvements</strong> - Notice opportunities for better code quality, documentation</li>
                        <li><strong>Contribute without being asked</strong> - If something should be updated, do it</li>
                        <li><strong>Don't wait</strong> - Never wait for user to identify obvious improvements</li>
                        <li><strong>Anticipate needs</strong> - Think ahead about what the user will need next</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Dynamic Docs -->
        <div class="section" id="dynamic-docs">
            <div class="section-header" onclick="toggleSection(this)">
                <div>
                    <div class="section-title">
                        <span class="badge auto">AUTO</span>
                        Dynamic Documentation
                    </div>
                    <div class="section-description">When to update memory.md, CLAUDE.md, create skills, create rules, maintain quick references</div>
                </div>
                <span class="toggle-icon">‚ñº</span>
            </div>
            <div class="section-content">
                <div class="quick-ref">
                    <h4>Quick Reference</h4>
                    <ul>
                        <li>Update memory.md when: preferences detected, decisions made, approaches fail, concepts explained</li>
                        <li>Update CLAUDE.md when: new code/models/routes/components/hooks/services created</li>
                        <li>Create skill when: same task done 3+ times, user says "I wish I could..."</li>
                        <li>Create rule when: behavior must be consistently enforced</li>
                        <li>Immediate updates: failed approaches, preferences, new skills (don't batch)</li>
                        <li>Remove outdated docs proactively - wrong docs are worse than no docs</li>
                    </ul>
                </div>

                <div class="content-block">
                    <h3>Update memory.md When...</h3>
                    <h4>User Preferences Detected</h4>
                    <p>Trigger phrases: "I prefer...", "I like...", "I want...", "Don't do...", "Never...", "Always...", "That's annoying"</p>

                    <h4>Decision Made</h4>
                    <p>Any architectural, design, workflow, or tooling decision that should persist. Add to Decisions Made table with date, decision, and reasoning.</p>

                    <h4>Approach Failed</h4>
                    <p>Something was tried and didn't work. Document in Failed Approaches to prevent repeating mistakes.</p>

                    <h4>Concept Explained</h4>
                    <p>Explaining a technical concept to the user. Log in Knowledge Growth to avoid over-explaining.</p>
                </div>

                <div class="content-block">
                    <h3>Update CLAUDE.md When...</h3>
                    <table>
                        <tr>
                            <th>Created</th>
                            <th>Section to Update</th>
                        </tr>
                        <tr>
                            <td>New model in models/</td>
                            <td>Add to Models table</td>
                        </tr>
                        <tr>
                            <td>New route in routes/</td>
                            <td>Add to Routes list</td>
                        </tr>
                        <tr>
                            <td>New component in components/ui/</td>
                            <td>Add to UI Components table</td>
                        </tr>
                        <tr>
                            <td>New hook in hooks/</td>
                            <td>Add to Hooks table</td>
                        </tr>
                        <tr>
                            <td>New service in services/</td>
                            <td>Add to Services list</td>
                        </tr>
                    </table>
                </div>

                <div class="content-block">
                    <h3>Create New Skill When...</h3>
                    <ul>
                        <li><strong>Same task done 3+ times</strong> - Notify user and suggest creating a skill</li>
                        <li><strong>User says "I wish I could just..."</strong> - Immediately suggest creating a skill</li>
                        <li><strong>Complex multi-step process</strong> - A task requiring 5+ manual steps that will be repeated</li>
                    </ul>
                </div>

                <div class="content-block">
                    <h3>Maintenance & Cleanup</h3>
                    <p><strong>Key Principle:</strong> Documentation that's wrong is worse than no documentation - it misleads and wastes time. Prune actively.</p>
                    <ul>
                        <li>Remove preferences contradicted by newer preferences</li>
                        <li>Remove decisions that were reversed or superseded</li>
                        <li>Remove failed approaches that later worked</li>
                        <li>Update knowledge levels as user learns</li>
                        <li>Remove outdated code references from CLAUDE.md</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- QA Standards -->
        <div class="section" id="qa-standards">
            <div class="section-header" onclick="toggleSection(this)">
                <div>
                    <div class="section-title">
                        <span class="badge auto">AUTO</span>
                        QA Standards
                    </div>
                    <div class="section-description">CI authority, agent order, coverage strategy, plain-English communication</div>
                </div>
                <span class="toggle-icon">‚ñº</span>
            </div>
            <div class="section-content">
                <div class="quick-ref">
                    <h4>Quick Reference</h4>
                    <ul>
                        <li>CI is single source of truth - Claude suggests, CI decides, user approves</li>
                        <li>Agent order: qa-reviewer FIRST, then test-writer (never parallel on same code)</li>
                        <li>Auth triple required: 401 (no auth) + 403 (wrong user) + 200 (valid owner)</li>
                        <li>Always provide plain-English summaries of test results</li>
                        <li>Never block progress without clear path forward</li>
                    </ul>
                </div>

                <div class="content-block">
                    <h3>Core Principles</h3>
                    <ol>
                        <li>CI is the single source of truth - Claude suggests, CI decides, user approves</li>
                        <li>Gradual enforcement - Never block progress without clear path forward</li>
                        <li>Behavior over implementation - Tests must catch real bugs</li>
                        <li>Plain-English communication - User should understand what's happening</li>
                    </ol>
                </div>

                <div class="content-block">
                    <h3>Authority Boundaries</h3>
                    <table>
                        <tr>
                            <th>Decision</th>
                            <th>Claude</th>
                            <th>CI</th>
                            <th>User</th>
                        </tr>
                        <tr>
                            <td>Write tests</td>
                            <td>‚úÖ</td>
                            <td>‚ùå</td>
                            <td>‚ùå</td>
                        </tr>
                        <tr>
                            <td>Suggest fixes</td>
                            <td>‚úÖ</td>
                            <td>‚ùå</td>
                            <td>‚ùå</td>
                        </tr>
                        <tr>
                            <td>Run tests</td>
                            <td>‚ùå</td>
                            <td>‚úÖ</td>
                            <td>‚ùå</td>
                        </tr>
                        <tr>
                            <td>Pass/fail checks</td>
                            <td>‚ùå</td>
                            <td>‚úÖ</td>
                            <td>‚ùå</td>
                        </tr>
                        <tr>
                            <td>Override failure</td>
                            <td>‚ùå</td>
                            <td>‚ùå</td>
                            <td>‚úÖ</td>
                        </tr>
                    </table>
                </div>

                <div class="content-block">
                    <h3>Agent Execution Order</h3>
                    <p><strong>STRICT ORDER - Never run agents in parallel:</strong></p>
                    <ol>
                        <li><strong>qa-reviewer runs FIRST</strong> - Reviews code quality, security, UI. May auto-fix simple issues.</li>
                        <li><strong>test-writer runs SECOND</strong> - Only after qa-reviewer completes. Only if no critical issues blocking.</li>
                    </ol>
                </div>

                <div class="content-block">
                    <h3>Test Requirements by Change Type</h3>
                    <h4>New Feature</h4>
                    <ul>
                        <li>Happy path test (required)</li>
                        <li>Auth triple if protected (required)</li>
                        <li>Validation tests if user input (required)</li>
                        <li>Edge cases (recommended)</li>
                    </ul>

                    <h4>Bug Fix</h4>
                    <ul>
                        <li>Test that reproduces the bug (required)</li>
                        <li>Test that verifies the fix (required)</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Testing -->
        <div class="section" id="testing">
            <div class="section-header" onclick="toggleSection(this)">
                <div>
                    <div class="section-title">
                        <span class="badge auto">AUTO</span>
                        Testing
                    </div>
                    <div class="section-description">AAA pattern, query priority, test structure, mocking guidance</div>
                </div>
                <span class="toggle-icon">‚ñº</span>
            </div>
            <div class="section-content">
                <div class="quick-ref">
                    <h4>Quick Reference</h4>
                    <ul>
                        <li>Test files live next to code they test (e.g., <code>Skeleton.test.jsx</code> next to <code>Skeleton.jsx</code>)</li>
                        <li>Use Arrange-Act-Assert pattern for test structure</li>
                        <li>Query priority: getByRole > getByLabelText > getByText > getByTestId (last resort)</li>
                        <li>Test behavior, not implementation - avoid testing internal state</li>
                        <li>Mock only external services, not your own code when possible</li>
                    </ul>
                </div>

                <div class="content-block">
                    <h3>Test Structure (Arrange-Act-Assert)</h3>
                    <pre><code>describe('NotesService', () => {
  describe('createNote', () => {
    it('should create a note with valid data', async () => {
      // Arrange - set up test data
      const noteData = { title: 'Test', content: 'Content' };
      const userId = 'user123';

      // Act - perform the action
      const result = await notesService.createNote(noteData, userId);

      // Assert - verify the outcome
      expect(result.title).toBe('Test');
      expect(result.userId).toBe(userId);
    });
  });
});</code></pre>
                </div>

                <div class="content-block">
                    <h3>Frontend Testing - Query Priority</h3>
                    <p>Use queries in this priority order (most to least preferred):</p>
                    <ol>
                        <li><code>getByRole</code> - accessible to everyone</li>
                        <li><code>getByLabelText</code> - form fields</li>
                        <li><code>getByPlaceholderText</code> - form fields without labels</li>
                        <li><code>getByText</code> - non-interactive elements</li>
                        <li><code>getByTestId</code> - last resort</li>
                    </ol>
                </div>

                <div class="content-block">
                    <h3>What to Test</h3>
                    <h4>DO Test:</h4>
                    <ul>
                        <li>Happy path (normal usage)</li>
                        <li>Edge cases (empty input, max values)</li>
                        <li>Error handling (invalid input, unauthorized)</li>
                        <li>User interactions (clicks, form submissions)</li>
                        <li>Accessibility (can be used with keyboard)</li>
                    </ul>

                    <h4>DON'T Test:</h4>
                    <ul>
                        <li>Implementation details (internal state, private methods)</li>
                        <li>Third-party libraries (they have their own tests)</li>
                        <li>Trivial code (simple getters, pass-through functions)</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Test Quality Gates -->
        <div class="section" id="test-quality">
            <div class="section-header" onclick="toggleSection(this)">
                <div>
                    <div class="section-title">
                        <span class="badge auto">AUTO</span>
                        Test Quality Gates
                    </div>
                    <div class="section-description">Auth triple, anti-patterns, behavior-focused testing</div>
                </div>
                <span class="toggle-icon">‚ñº</span>
            </div>
            <div class="section-content">
                <div class="quick-ref">
                    <h4>Quick Reference</h4>
                    <ul>
                        <li>Golden rule: "Would this test fail if the feature broke?" - if no, improve it</li>
                        <li>Assert behavior/outcomes, not implementation details</li>
                        <li>Minimal mocking - only mock external services, let real DB/auth run</li>
                        <li>Auth triple required: 401 + 403 + 200 for every protected endpoint</li>
                        <li>Avoid: snapshot abuse, mock-only assertions, testing third-party libraries</li>
                        <li>60% good coverage beats 90% mock-heavy coverage</li>
                    </ul>
                </div>

                <div class="content-block">
                    <h3>The Golden Rule</h3>
                    <p><strong>Every test must answer: "Would this fail if the feature broke?"</strong></p>
                    <p>If the answer is "no" or "maybe," the test needs improvement.</p>
                </div>

                <div class="content-block">
                    <h3>Auth Triple (REQUIRED for Protected Routes)</h3>
                    <pre><code>describe('POST /api/tasks', () => {
  // Test 1: No auth
  it('returns 401 without authentication', async () => {
    const res = await request(app)
      .post('/api/tasks')
      .send({ title: 'Test' });
    expect(res.status).toBe(401);
  });

  // Test 2: Wrong user
  it('returns 403 for non-owner', async () => {
    const res = await request(app)
      .get('/api/tasks/' + otherUserTaskId)
      .set('Cookie', myAuthCookie);
    expect(res.status).toBe(403);
  });

  // Test 3: Valid owner
  it('returns 200 for owner', async () => {
    const res = await request(app)
      .get('/api/tasks/' + myTaskId)
      .set('Cookie', myAuthCookie);
    expect(res.status).toBe(200);
  });
});</code></pre>
                </div>

                <div class="content-block">
                    <h3>Anti-Patterns to Avoid</h3>
                    <h4>1. Mock-Only Assertions</h4>
                    <p>‚ùå Only asserts mock was called - passes even if feature is broken</p>

                    <h4>2. Snapshot Abuse</h4>
                    <p>‚ùå Snapshots entire component - changes to unrelated parts break test</p>

                    <h4>3. Implementation Coupling</h4>
                    <p>‚ùå Breaks if you rename internal method - tests the implementation, not the contract</p>

                    <h4>4. Testing Third-Party Libraries</h4>
                    <p>‚ùå Testing that date-fns works - library has its own tests</p>
                </div>

                <div class="content-block">
                    <h3>Test Coverage Philosophy</h3>
                    <p><strong>Prefer:</strong></p>
                    <ul>
                        <li>60% coverage with behavior tests</li>
                        <li>Tests that catch real bugs</li>
                        <li>Tests that don't break on refactors</li>
                    </ul>
                    <p><strong>Over:</strong></p>
                    <ul>
                        <li>90% coverage with mock-heavy tests</li>
                        <li>Tests that assert implementation details</li>
                        <li>Tests that break when you rename a variable</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Logging -->
        <div class="section" id="logging">
            <div class="section-header" onclick="toggleSection(this)">
                <div>
                    <div class="section-title">
                        <span class="badge auto">AUTO</span>
                        Logging (Wide Events)
                    </div>
                    <div class="section-description">Wide Events pattern, entity IDs, event names, mutation context</div>
                </div>
                <span class="toggle-icon">‚ñº</span>
            </div>
            <div class="section-content">
                <div class="quick-ref">
                    <h4>Quick Reference</h4>
                    <ul>
                        <li>One comprehensive log per request with ALL context (Wide Events pattern)</li>
                        <li>Always attach entity IDs: <code>attachEntityId(req, 'noteId', note._id)</code></li>
                        <li>Set event names for important actions: <code>req.eventName = 'note.archive.success'</code></li>
                        <li>Capture mutation context: <code>req.mutation = { before, after }</code></li>
                        <li>Never log: passwords, tokens, full file contents, large arrays (log count instead)</li>
                    </ul>
                </div>

                <div class="content-block">
                    <h3>Core Principle</h3>
                    <p>One comprehensive log entry per request containing ALL relevant context. Logs are for debugging and analytics, not just error tracking.</p>
                </div>

                <div class="content-block">
                    <h3>Required in Route Handlers</h3>
                    <h4>1. Attach Entity IDs</h4>
                    <pre><code>import { attachEntityId } from '../middleware/requestLogger.js';

// In route handler:
const note = await Note.findById(noteId);
attachEntityId(req, 'noteId', note._id);

// For user-owned resources:
attachEntityId(req, 'userId', note.userId);

// For related entities:
attachEntityId(req, 'projectId', note.projectId);</code></pre>

                    <h4>2. Set Custom Event Names (for important actions)</h4>
                    <pre><code>req.eventName = 'note.archive.success';
req.eventName = 'payment.checkout.failed';
req.eventName = 'user.subscription.upgraded';</code></pre>

                    <h4>3. Add Mutation Context (for state changes)</h4>
                    <pre><code>// Before update
const before = { status: task.status, priority: task.priority };

// After update
task.status = 'completed';
await task.save();

// Attach mutation context
req.mutation = {
  before,
  after: { status: task.status, priority: task.priority }
};</code></pre>
                </div>

                <div class="content-block">
                    <h3>Entity ID Naming Convention</h3>
                    <table>
                        <tr>
                            <th>Entity</th>
                            <th>ID Name</th>
                        </tr>
                        <tr>
                            <td>Note</td>
                            <td>noteId</td>
                        </tr>
                        <tr>
                            <td>Task</td>
                            <td>taskId</td>
                        </tr>
                        <tr>
                            <td>Project</td>
                            <td>projectId</td>
                        </tr>
                        <tr>
                            <td>User (target)</td>
                            <td>targetUserId</td>
                        </tr>
                        <tr>
                            <td>Connection</td>
                            <td>connectionId</td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>

        <!-- API Errors -->
        <div class="section" id="api-errors">
            <div class="section-header" onclick="toggleSection(this)">
                <div>
                    <div class="section-title">
                        <span class="badge auto">AUTO</span>
                        API Error Handling
                    </div>
                    <div class="section-description">Consistent error format, status codes, ownership checks</div>
                </div>
                <span class="toggle-icon">‚ñº</span>
            </div>
            <div class="section-content">
                <div class="quick-ref">
                    <h4>Quick Reference</h4>
                    <ul>
                        <li>Always use <code>next(error)</code> - never send inconsistent error formats directly</li>
                        <li>Standard format: <code>{ error: { message, code, field? } }</code></li>
                        <li>Set <code>error.statusCode</code> and <code>error.code</code> before passing to next()</li>
                        <li>Always wrap async handlers in try-catch</li>
                        <li>Check ownership: 404 if not found, 403 if wrong user</li>
                        <li>Never expose internal error details to users in production</li>
                    </ul>
                </div>

                <div class="content-block">
                    <h3>Standard Error Response Format</h3>
                    <pre><code>{
  error: {
    message: "Human-readable message",
    code: "ERROR_CODE",
    field: "fieldName"  // Optional, for validation errors
  }
}</code></pre>
                </div>

                <div class="content-block">
                    <h3>Error Status Codes</h3>
                    <table>
                        <tr>
                            <th>Code</th>
                            <th>When to Use</th>
                        </tr>
                        <tr>
                            <td>400</td>
                            <td>Invalid input - Missing required field, invalid format</td>
                        </tr>
                        <tr>
                            <td>401</td>
                            <td>Not authenticated - No token, expired token</td>
                        </tr>
                        <tr>
                            <td>403</td>
                            <td>Not authorized - User can't access this resource</td>
                        </tr>
                        <tr>
                            <td>404</td>
                            <td>Not found - Resource doesn't exist</td>
                        </tr>
                        <tr>
                            <td>409</td>
                            <td>Conflict - Duplicate entry, version conflict</td>
                        </tr>
                        <tr>
                            <td>500</td>
                            <td>Server error - Unexpected errors, bugs</td>
                        </tr>
                    </table>
                </div>

                <div class="content-block">
                    <h3>Common Error Codes</h3>
                    <ul>
                        <li><code>VALIDATION_ERROR</code> - Input validation failed</li>
                        <li><code>NOT_FOUND</code> - Resource doesn't exist</li>
                        <li><code>FORBIDDEN</code> - User lacks permission</li>
                        <li><code>UNAUTHORIZED</code> - Authentication required</li>
                        <li><code>DUPLICATE</code> - Resource already exists</li>
                        <li><code>INTERNAL_ERROR</code> - Server error</li>
                    </ul>
                </div>

                <div class="content-block">
                    <h3>Ownership Checks</h3>
                    <pre><code>// Check if user owns the resource
const note = await Note.findById(req.params.id);

if (!note) {
  return next(createError('Note not found', 404, 'NOT_FOUND'));
}

if (note.userId.toString() !== req.user._id.toString()) {
  return next(createError('Access denied', 403, 'FORBIDDEN'));
}</code></pre>
                </div>
            </div>
        </div>

        <!-- Frontend Components -->
        <div class="section" id="frontend-components">
            <div class="section-header" onclick="toggleSection(this)">
                <div>
                    <div class="section-title">
                        <span class="badge auto">AUTO</span>
                        Frontend Components
                    </div>
                    <div class="section-description">Component reuse, required imports, shared UI patterns</div>
                </div>
                <span class="toggle-icon">‚ñº</span>
            </div>
            <div class="section-content">
                <div class="quick-ref">
                    <h4>Quick Reference</h4>
                    <ul>
                        <li>Always check <code>components/ui/</code> before creating new components</li>
                        <li>Modals: use <code>BaseModal</code> - never create custom modal implementations</li>
                        <li>Loading: use <code>Skeleton</code> - no inline "Loading..." text</li>
                        <li>Empty states: use <code>EmptyState</code> component</li>
                        <li>API calls: use <code>api.js</code> - never raw fetch</li>
                        <li>Dates: use <code>dateUtils.js</code> - never manual formatting</li>
                        <li>State: TanStack Query for server data, Redux for global UI state</li>
                    </ul>
                </div>

                <div class="content-block">
                    <h3>Required Component Reuse</h3>
                    <table>
                        <tr>
                            <th>Need</th>
                            <th>Component</th>
                        </tr>
                        <tr>
                            <td>Modal/Dialog</td>
                            <td>BaseModal</td>
                        </tr>
                        <tr>
                            <td>Confirmation</td>
                            <td>ConfirmDialog</td>
                        </tr>
                        <tr>
                            <td>Loading state</td>
                            <td>Skeleton</td>
                        </tr>
                        <tr>
                            <td>Empty state</td>
                            <td>EmptyState</td>
                        </tr>
                        <tr>
                            <td>Tag selection</td>
                            <td>TagInput</td>
                        </tr>
                        <tr>
                            <td>Date/time</td>
                            <td>DateTimePicker</td>
                        </tr>
                    </table>
                </div>

                <div class="content-block">
                    <h3>Hooks to Use</h3>
                    <table>
                        <tr>
                            <th>Need</th>
                            <th>Hook</th>
                        </tr>
                        <tr>
                            <td>Debounced input</td>
                            <td>useDebounce</td>
                        </tr>
                        <tr>
                            <td>Auto-save</td>
                            <td>useAutoSave</td>
                        </tr>
                        <tr>
                            <td>Keyboard shortcuts</td>
                            <td>useKeyboardShortcuts</td>
                        </tr>
                        <tr>
                            <td>Toast notifications</td>
                            <td>useToast</td>
                        </tr>
                        <tr>
                            <td>Feature flags</td>
                            <td>useFeatureFlag</td>
                        </tr>
                    </table>
                </div>

                <div class="content-block">
                    <h3>Common Mistakes to Avoid</h3>
                    <ol>
                        <li>Creating custom modals - Use BaseModal</li>
                        <li>Inline loading spinners - Use Skeleton</li>
                        <li>Raw fetch calls - Use api.js</li>
                        <li>Manual date formatting - Use dateUtils</li>
                        <li>Duplicate form validation - Check if pattern exists</li>
                        <li>New toast implementation - Use useToast hook</li>
                    </ol>
                </div>
            </div>
        </div>

        <!-- Security -->
        <div class="section" id="security">
            <div class="section-header" onclick="toggleSection(this)">
                <div>
                    <div class="section-title">
                        <span class="badge auto">AUTO</span>
                        Security
                    </div>
                    <div class="section-description">Auth, validation, injection prevention, sensitive data handling</div>
                </div>
                <span class="toggle-icon">‚ñº</span>
            </div>
            <div class="section-content">
                <div class="quick-ref">
                    <h4>Quick Reference</h4>
                    <ul>
                        <li>Never trust user input - always validate, sanitize, and authorize</li>
                        <li>Passwords: bcrypt with 12 rounds, never plain text</li>
                        <li>JWTs: HttpOnly cookies only, never localStorage</li>
                        <li>Always verify ownership: 404 if not found, 403 if wrong user</li>
                        <li>Admin routes: always use <code>requireAdmin</code> middleware</li>
                        <li>Validate ObjectIds before database queries</li>
                        <li>Never log passwords/tokens, never return password in responses</li>
                    </ul>
                </div>

                <div class="content-block">
                    <h3>Authentication</h3>
                    <h4>Password Handling</h4>
                    <pre><code>// ‚úì Good - use bcrypt
import bcrypt from 'bcrypt';

const hashedPassword = await bcrypt.hash(password, 12);
const isValid = await bcrypt.compare(inputPassword, hashedPassword);

// ‚úó Bad - NEVER do this
user.password = password;  // Plain text!</code></pre>

                    <h4>JWT Tokens</h4>
                    <pre><code>// ‚úì Good - HttpOnly cookie
res.cookie('token', token, {
  httpOnly: true,
  secure: process.env.NODE_ENV === 'production',
  sameSite: 'strict',
  maxAge: 7 * 24 * 60 * 60 * 1000
});

// ‚úó Bad - localStorage (vulnerable to XSS)
res.json({ token });  // Client stores in localStorage</code></pre>
                </div>

                <div class="content-block">
                    <h3>Authorization</h3>
                    <h4>Always Check Ownership</h4>
                    <pre><code>// ‚úì Good - verify user owns the resource
const note = await Note.findById(req.params.id);

if (!note) {
  return res.status(404).json({ error: 'Not found' });
}

if (note.userId.toString() !== req.user._id.toString()) {
  return res.status(403).json({ error: 'Access denied' });
}

// ‚úó Bad - no ownership check
const note = await Note.findById(req.params.id);
res.json(note);  // Anyone can access!</code></pre>
                </div>

                <div class="content-block">
                    <h3>Input Validation</h3>
                    <ul>
                        <li>Validate all input parameters</li>
                        <li>Sanitize HTML content to prevent XSS</li>
                        <li>Validate ObjectIds before database queries</li>
                        <li>Use parameterized queries to prevent injection</li>
                    </ul>
                </div>

                <div class="content-block">
                    <h3>Sensitive Data</h3>
                    <ul>
                        <li>Never log passwords, tokens, or sensitive data</li>
                        <li>Never return passwords in API responses</li>
                        <li>Use <code>.select('-password')</code> when querying users</li>
                        <li>Never commit secrets to git (.env files)</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Services -->
        <div class="section" id="services">
            <div class="section-header" onclick="toggleSection(this)">
                <div>
                    <div class="section-title">
                        <span class="badge auto">AUTO</span>
                        Service Layer
                    </div>
                    <div class="section-description">Service architecture, naming conventions, error handling</div>
                </div>
                <span class="toggle-icon">‚ñº</span>
            </div>
            <div class="section-content">
                <div class="quick-ref">
                    <h4>Quick Reference</h4>
                    <ul>
                        <li>Services = business logic, Routes = HTTP handling, Models = data</li>
                        <li>Services must NOT access req/res objects</li>
                        <li>Throw errors with <code>statusCode</code> and <code>code</code> - let routes handle HTTP</li>
                        <li>Use transactions for multi-model operations</li>
                        <li>Naming: <code>createNote</code>, <code>getNoteById</code>, <code>getNotes</code>, <code>updateNote</code>, <code>deleteNote</code></li>
                        <li>Extract shared logic to utils (e.g., <code>verifyOwnership</code>)</li>
                    </ul>
                </div>

                <div class="content-block">
                    <h3>Architecture</h3>
                    <pre><code>Route (HTTP handling)
  ‚Üì
Service (business logic)
  ‚Üì
Model (database operations)</code></pre>
                </div>

                <div class="content-block">
                    <h3>Service Responsibilities</h3>
                    <h4>Services should:</h4>
                    <ul>
                        <li>Contain all business logic</li>
                        <li>Be reusable across routes</li>
                        <li>Not know about HTTP (req, res)</li>
                        <li>Return data or throw errors</li>
                        <li>Handle complex operations</li>
                    </ul>

                    <h4>Services should NOT:</h4>
                    <ul>
                        <li>Access req or res objects</li>
                        <li>Format HTTP responses</li>
                        <li>Handle authentication (middleware does this)</li>
                        <li>Contain database schema logic (models do this)</li>
                    </ul>
                </div>

                <div class="content-block">
                    <h3>Service Naming Conventions</h3>
                    <table>
                        <tr>
                            <th>Operation</th>
                            <th>Function Name</th>
                        </tr>
                        <tr>
                            <td>Create</td>
                            <td>createNote, createTask</td>
                        </tr>
                        <tr>
                            <td>Get one</td>
                            <td>getNoteById, getTaskById</td>
                        </tr>
                        <tr>
                            <td>Get many</td>
                            <td>getNotes, getTasks, getUserTasks</td>
                        </tr>
                        <tr>
                            <td>Update</td>
                            <td>updateNote, updateTask</td>
                        </tr>
                        <tr>
                            <td>Delete</td>
                            <td>deleteNote, deleteTask</td>
                        </tr>
                        <tr>
                            <td>Special</td>
                            <td>archiveNote, shareNote, duplicateTask</td>
                        </tr>
                    </table>
                </div>

                <div class="content-block">
                    <h3>Error Handling in Services</h3>
                    <pre><code>// Throw errors with status codes
if (!note) {
  const error = new Error('Note not found');
  error.statusCode = 404;
  error.code = 'NOT_FOUND';
  throw error;
}

// The route's error handler will format this appropriately</code></pre>
                </div>
            </div>
        </div>

        <!-- Design -->
        <div class="section" id="design">
            <div class="section-header" onclick="toggleSection(this)">
                <div>
                    <div class="section-title">
                        <span class="badge auto">AUTO</span>
                        Design
                    </div>
                    <div class="section-description">CSS variables, spacing, typography, dark mode, accessibility</div>
                </div>
                <span class="toggle-icon">‚ñº</span>
            </div>
            <div class="section-content">
                <div class="quick-ref">
                    <h4>Quick Reference</h4>
                    <ul>
                        <li>Never hardcode colors - always use CSS variables (<code>--primary</code>, <code>--panel</code>, etc.)</li>
                        <li>Spacing: use 4px scale only (4, 8, 12, 16, 20, 24, 32, 40, 48)</li>
                        <li>Check <code>components/ui/</code> first: BaseModal, Skeleton, EmptyState, Dropdown</li>
                        <li>All clickables need: hover state, focus state, transition</li>
                        <li>Everything must work in dark mode - use CSS variables (they auto-switch)</li>
                        <li>Touch targets: minimum 44x44px on mobile</li>
                    </ul>
                </div>

                <div class="content-block">
                    <h3>Color Rules</h3>
                    <p><strong>NEVER hardcode colors. Always use CSS variables:</strong></p>
                    <pre><code>// ‚úì Good
className="bg-[var(--panel)] text-[var(--text)] border-[var(--border)]"

// ‚úó Bad
className="bg-gray-100 text-gray-900 border-gray-200"
className="bg-[#f3f4f6]"</code></pre>

                    <h4>Semantic Usage</h4>
                    <table>
                        <tr>
                            <th>Variable</th>
                            <th>Use For</th>
                        </tr>
                        <tr>
                            <td>--primary</td>
                            <td>Main actions, links, focus</td>
                        </tr>
                        <tr>
                            <td>--danger</td>
                            <td>Delete, errors, warnings</td>
                        </tr>
                        <tr>
                            <td>--success</td>
                            <td>Confirmations, positive states</td>
                        </tr>
                        <tr>
                            <td>--muted</td>
                            <td>Secondary text, placeholders</td>
                        </tr>
                        <tr>
                            <td>--border</td>
                            <td>All borders and dividers</td>
                        </tr>
                        <tr>
                            <td>--panel</td>
                            <td>Card/component backgrounds</td>
                        </tr>
                    </table>
                </div>

                <div class="content-block">
                    <h3>Spacing Rules</h3>
                    <p>Use the 4px scale. No arbitrary values:</p>
                    <pre><code>// ‚úì Good - uses scale (4, 8, 12, 16, 20, 24, 32, 40, 48)
className="p-4 mb-6 gap-3"  // 16px, 24px, 12px

// ‚úó Bad - arbitrary values
className="p-[13px] mb-[22px]"</code></pre>
                </div>

                <div class="content-block">
                    <h3>Interaction Rules</h3>
                    <p>Every clickable element must have:</p>
                    <ul>
                        <li>Hover state: <code>hover:bg-[var(--panel2)]</code></li>
                        <li>Focus state: <code>focus:outline-none focus:ring-2 focus:ring-[var(--primary)]</code></li>
                        <li>Transition: <code>transition-colors</code></li>
                    </ul>
                </div>

                <div class="content-block">
                    <h3>Accessibility Rules</h3>
                    <ul>
                        <li>Touch targets: Minimum 44x44px on mobile</li>
                        <li>Color contrast: 4.5:1 for text (WCAG AA)</li>
                        <li>Focus visible: Clear focus indicators</li>
                        <li>ARIA labels: For icon-only buttons</li>
                        <li>Keyboard nav: Everything reachable via Tab</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Memory -->
        <div class="section" id="memory">
            <div class="section-header" onclick="toggleSection(this)">
                <div>
                    <div class="section-title">
                        <span class="badge auto">AUTO</span>
                        Memory
                    </div>
                    <div class="section-description">User preferences, decisions, failed approaches, session history</div>
                </div>
                <span class="toggle-icon">‚ñº</span>
            </div>
            <div class="section-content">
                <div class="quick-ref">
                    <h4>Quick Reference</h4>
                    <ul>
                        <li>Read this at session start to recall context</li>
                        <li>Update when: preferences detected, decisions made, approaches fail</li>
                        <li>Check Decisions Made before revisiting settled topics</li>
                        <li>Check Failed Approaches before trying similar solutions</li>
                        <li>Check Knowledge Growth to avoid over-explaining concepts</li>
                        <li>Triggers and thresholds section defines when to create skills/rules</li>
                    </ul>
                </div>

                <div class="content-block">
                    <h3>User Preferences</h3>
                    <table>
                        <tr>
                            <th>Preference</th>
                            <th>Notes</th>
                        </tr>
                        <tr>
                            <td>Explanation depth</td>
                            <td>Explain what you're doing, use simple terms (non-coder)</td>
                        </tr>
                        <tr>
                            <td>Commit reminders</td>
                            <td>Run /checkpoint after completing features (don't ask, just do it)</td>
                        </tr>
                        <tr>
                            <td>Risk warnings</td>
                            <td>Warn before destructive or hard-to-undo actions</td>
                        </tr>
                        <tr>
                            <td>Claude as expert</td>
                            <td>"You should be the expert, I'm relying on you" - be proactive, document thoroughly</td>
                        </tr>
                        <tr>
                            <td>Don't ask, do</td>
                            <td>If documentation/skills are needed, create them without asking</td>
                        </tr>
                    </table>
                </div>

                <div class="content-block">
                    <h3>Work Style Preferences</h3>
                    <p>See <code>.claude/rules/work-style.md</code> for authoritative rules.</p>
                    <ul>
                        <li>Main Claude stays available for conversation; agents do all work</li>
                        <li>Default to background agents (<code>run_in_background: true</code>)</li>
                        <li>Communicate when dispatching: "Sending X agent(s) to [task]. (Y active)"</li>
                        <li>Monitor agent outputs, catch issues early</li>
                        <li>Model selection: bias toward Opus for quality, lighter models only when confident</li>
                    </ul>
                </div>

                <div class="content-block">
                    <h3>Key Decisions Made</h3>
                    <table>
                        <tr>
                            <th>Date</th>
                            <th>Decision</th>
                        </tr>
                        <tr>
                            <td>2026-01-28</td>
                            <td>Notes always need processing - Core Second Brain principle</td>
                        </tr>
                        <tr>
                            <td>2025-01-20</td>
                            <td>Wide Events logging pattern - one log per request with full context</td>
                        </tr>
                        <tr>
                            <td>2025-01-22</td>
                            <td>App-wide glassmorphism on visual chrome (sidebar, topbar, modals, panels)</td>
                        </tr>
                        <tr>
                            <td>2026-01-29</td>
                            <td>Direct push workflow - no PRs, commit and push directly to main</td>
                        </tr>
                    </table>
                </div>

                <div class="content-block">
                    <h3>Failed Approaches</h3>
                    <p>Things that didn't work - don't try again:</p>
                    <table>
                        <tr>
                            <th>Date</th>
                            <th>What We Tried</th>
                            <th>Why It Failed</th>
                        </tr>
                        <tr>
                            <td>2025-01-21</td>
                            <td>Bento grid dashboard prototype</td>
                            <td>"Same old feel, nothing new" - just rearranging widgets</td>
                        </tr>
                        <tr>
                            <td>2025-01-22</td>
                            <td>App-wide glassmorphism batch update</td>
                            <td>Broke the entire app - incremental approach needed</td>
                        </tr>
                        <tr>
                            <td>2025-01-22</td>
                            <td>glass-heavy on BaseModal</td>
                            <td>Broke modal functionality - use regular glass instead</td>
                        </tr>
                    </table>
                </div>

                <div class="content-block">
                    <h3>Triggers & Thresholds</h3>
                    <h4>Create New Skill When:</h4>
                    <ul>
                        <li>Same manual task repeated 3+ times</li>
                        <li>User says "I wish I could just..." (1 time)</li>
                        <li>Same question asked 3+ times</li>
                    </ul>

                    <h4>Browser Automation Triggers:</h4>
                    <ul>
                        <li>UI feature completed ‚Üí Screenshot the result</li>
                        <li>Significant UI change ‚Üí Take before/after screenshots</li>
                        <li>After frontend changes ‚Üí Smoke test</li>
                        <li>Form-related changes ‚Üí Test validation and error states</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- On Demand -->
        <div class="section" id="on-demand">
            <div class="section-header" onclick="toggleSection(this)">
                <div>
                    <div class="section-title">
                        <span class="badge demand">ON-DEMAND</span>
                        On-Demand Files
                    </div>
                    <div class="section-description">Files loaded when needed, not automatically</div>
                </div>
                <span class="toggle-icon">‚ñº</span>
            </div>
            <div class="section-content">
                <div class="content-block">
                    <h3>CLAUDE.md</h3>
                    <p><strong>Purpose:</strong> Comprehensive project documentation and guidance for Claude Code</p>
                    <p><strong>When to reference:</strong></p>
                    <ul>
                        <li>Session start (quick overview)</li>
                        <li>When unsure of project structure</li>
                        <li>When looking for existing components/hooks/services</li>
                        <li>When working with new features or areas</li>
                    </ul>
                    <p><strong>Location:</strong> <code>C:\Users\NewAdmin\Desktop\PROJECTS\myBrain\CLAUDE.md</code></p>
                </div>

                <div class="content-block">
                    <h3>design-system.md</h3>
                    <p><strong>Purpose:</strong> Complete design system with colors, typography, spacing, components</p>
                    <p><strong>When to reference:</strong></p>
                    <ul>
                        <li>Before any UI work</li>
                        <li>When user mentions design issues</li>
                        <li>When creating new UI components</li>
                        <li>When updating styling</li>
                    </ul>
                    <p><strong>Location:</strong> <code>C:\Users\NewAdmin\Desktop\PROJECTS\myBrain\.claude\design\design-system.md</code></p>
                </div>

                <div class="content-block">
                    <h3>Skills (Slash Commands)</h3>
                    <p><strong>Available skills:</strong></p>
                    <ul>
                        <li><code>/checkpoint</code> - Quick save: commit all changes and push to GitHub</li>
                        <li><code>/code-reviewer</code> - Expert code review for quality, security, and maintainability</li>
                        <li><code>/commenter</code> - Add comprehensive educational comments</li>
                        <li><code>/design</code> - Quick design consultation</li>
                        <li><code>/design-review</code> - Audit UI code for design system compliance</li>
                        <li><code>/inspiration</code> - Analyze images in inspiration folder</li>
                        <li><code>/logging-audit</code> - Audit backend routes for Wide Events logging</li>
                        <li><code>/prototype</code> - Create HTML/CSS/JS prototype files</li>
                        <li><code>/qa-status</code> - Get test coverage and code quality status</li>
                        <li><code>/reuse-check</code> - Review code for missed reuse opportunities</li>
                        <li><code>/smoke-test</code> - Run automated browser tests</li>
                        <li><code>/sync-docs</code> - Update CLAUDE.md and SKILLS.md</li>
                        <li><code>/audit-now</code> - Run comprehensive QA audit</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        function toggleSection(header) {
            const section = header.parentElement;
            section.classList.toggle('expanded');
        }

        function toggleAll() {
            const sections = document.querySelectorAll('.section');
            const allExpanded = Array.from(sections).every(s => s.classList.contains('expanded'));

            sections.forEach(section => {
                if (allExpanded) {
                    section.classList.remove('expanded');
                } else {
                    section.classList.add('expanded');
                }
            });

            const button = document.querySelector('.expand-all');
            button.textContent = allExpanded ? 'Expand All Sections' : 'Collapse All Sections';
        }

        // Smooth scroll to sections
        document.querySelectorAll('.toc-link').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const targetId = link.getAttribute('href').substring(1);
                const targetSection = document.getElementById(targetId);

                // Expand the section
                targetSection.classList.add('expanded');

                // Scroll to it
                targetSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            });
        });
    </script>
</body>
</html>