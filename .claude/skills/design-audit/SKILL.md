---
name: design-audit
description: Comprehensive design system compliance audit
invocation: /design-audit
arguments: "[path]"
---

# Design Audit Skill

Run a comprehensive design system compliance audit on specified files or the entire codebase.

## Usage

```
/design-audit                    # Audit entire frontend
/design-audit src/components/    # Audit specific directory
/design-audit src/features/dashboard/  # Audit dashboard only
```

## What This Skill Does

1. **Scans for design system violations:**
   - Hardcoded colors (hex, rgb, rgba, hsl)
   - Typography off-scale
   - Spacing not on 8px grid
   - Card padding under 24px
   - Border radius not using tokens

2. **Checks component compliance:**
   - Proper use of existing components (BaseModal, Widget, etc.)
   - CSS variable usage (--v2-* preferred)
   - Dark mode support

3. **Detects anti-patterns:**
   - Red used for non-errors
   - Wall of sameness (weak hierarchy)
   - Hidden primary actions
   - Modal abuse

4. **Generates actionable report:**
   - Violations by severity
   - Specific line numbers
   - Suggested fixes

## Execution Steps

### Step 1: Gather Files
```bash
# If path specified, use it. Otherwise default to frontend
TARGET=${1:-myBrain-web/src}

# Find all JSX, CSS, and style files
find "$TARGET" -type f \( -name "*.jsx" -o -name "*.css" -o -name "*.tsx" \) | head -100
```

### Step 2: Scan for Hardcoded Colors
```bash
# Find hardcoded colors
grep -rn --include="*.jsx" --include="*.css" -E "#[0-9a-fA-F]{3,8}" "$TARGET" | grep -v "node_modules" | head -50
grep -rn --include="*.jsx" --include="*.css" -E "rgb\(|rgba\(|hsl\(" "$TARGET" | grep -v "node_modules" | head -50
```

### Step 3: Check Spacing Compliance
```bash
# Find non-grid spacing
grep -rn --include="*.css" -E "padding: [0-9]+px" "$TARGET" | grep -vE "(4|8|12|16|20|24|32|48)px"
grep -rn --include="*.css" -E "margin: [0-9]+px" "$TARGET" | grep -vE "(4|8|12|16|20|24|32|48)px"
```

### Step 4: Check for Red Misuse
```bash
# Find red color usage (needs context check)
grep -rn --include="*.jsx" --include="*.css" -E "red-[0-9]+|#[Ff][Ff]3[Bb]30|#[Ee][Ff]4444|--v2-red|--danger" "$TARGET" | head -30
```

### Step 5: Check Dark Mode Coverage
```bash
# Find files without .dark selectors
for file in $(find "$TARGET" -name "*.css" -type f); do
  if ! grep -q "\.dark" "$file"; then
    echo "Missing dark mode: $file"
  fi
done
```

### Step 6: Generate Report

Output format:

```markdown
# Design System Audit Report

**Date:** [current date]
**Scope:** [target path]
**Files Scanned:** [count]

## Summary

| Category | Violations | Severity |
|----------|------------|----------|
| Colors | X | HIGH |
| Spacing | X | MEDIUM |
| Typography | X | MEDIUM |
| Dark Mode | X | HIGH |
| Anti-Patterns | X | HIGH |

**Overall Score:** X/100
**Status:** [PASS | NEEDS WORK | CRITICAL]

## Critical Issues (Must Fix)

### Hardcoded Colors
| File | Line | Found | Should Be |
|------|------|-------|-----------|
| [file] | [line] | #007AFF | var(--v2-blue) |

### Dark Mode Missing
| File | Issue |
|------|-------|
| [file] | No .dark selectors found |

### Red Misuse
| File | Line | Context | Issue |
|------|------|---------|-------|
| [file] | [line] | "Overdue" | Red for non-error |

## Warnings (Should Fix)

### Spacing Off-Grid
| File | Line | Found | Nearest Valid |
|------|------|-------|---------------|
| [file] | [line] | 15px | 16px |

### Card Padding
| File | Line | Found | Minimum |
|------|------|-------|---------|
| [file] | [line] | 16px | 24px |

## Recommendations

1. **Immediate:** Fix all hardcoded colors
2. **Important:** Add dark mode to [files]
3. **Suggested:** Change red overdue indicators to amber

## Files Needing Attention

1. [file] - X violations
2. [file] - X violations
3. [file] - X violations

---
*Generated by /design-audit*
```

## After Running

1. Review the report
2. Prioritize critical issues
3. Create tasks for fixes if needed
4. Re-run after fixes to verify

## Related

- `/theme-check` - Quick theme compliance check
- `/visual-qa` - Visual hierarchy audit
- `/accessibility-audit` - Accessibility compliance
