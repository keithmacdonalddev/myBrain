# QA Audit Report

**Date:** 2026-01-24
**Type:** Manual Audit (/audit-now)

## Executive Summary

Backend tests are now **fully passing** (27/27). Coverage is at **3.3% frontend** and **7% backend**. The main gaps remain the core routes (tasks, projects, events) which have no tests. There's 1 moderate security vulnerability in dev dependencies only.

## Coverage Status

| Area | Statements | Branches | Functions |
|------|------------|----------|-----------|
| Frontend | 3.3% | 18.7% | 5.0% |
| Backend | 7.0% | 5.0% | 5.6% |

**Current Phase:** 1 (Informational)
**Next Phase:** At 20% overall, will enable diff-coverage checks

### What's Tested

**Backend (27 tests passing):**
- Auth routes: register, login, logout, /me endpoint
- Notes routes: CRUD, filtering, pagination, pin/archive/trash actions

**Frontend (36 tests passing):**
- Redux slices: auth, toast
- UI components: Skeleton, EmptyState, ThemeToggle

## Security Findings

### Dependency Vulnerabilities

| Severity | Frontend | Backend |
|----------|----------|---------|
| Critical | 0 | 0 |
| High | 0 | 0 |
| Moderate | 1 (dev only) | 0 |
| Low | 0 | 0 |

**Frontend:** esbuild vulnerability in vite (dev dependency only, not shipped to production)

### Code Quality Issues

| Metric | Count | Notes |
|--------|-------|-------|
| Console.logs | 137 | In backend production code |
| TODO/FIXME | 4 | Review and create issues |

## Untested Code

### Backend Routes (25 of 27 untested)

Only **auth.js** and **notes.js** have tests.

**High Priority** (core features, test first):
| Route | Lines | Why Priority |
|-------|-------|--------------|
| tasks.js | 1554 | Core feature, heavily used |
| projects.js | 1561 | Core feature with sub-items |
| events.js | ~1000 | Calendar functionality |

**Medium Priority:**
- files.js, images.js (file management)
- messages.js, notifications.js (real-time)
- connections.js (social)
- profile.js, settings.js (user management)

**Lower Priority:**
- admin.js, logs.js, analytics.js
- tags.js, filters.js, folders.js, weather.js

### Frontend

**No tests for:**
- All feature pages (dashboard, tasks, notes, projects, calendar)
- Most UI components (BaseModal, TagInput, DateTimePicker, etc.)
- Custom hooks (useDebounce, useAutoSave, useTags, etc.)
- Contexts

## Recommendations

### This Week
1. **Add tasks.js tests** - Core feature, highest impact
2. **Remove console.logs** - 137 in production backend code
3. **Review 4 TODO comments** - Create issues if needed

### This Month
1. Add tests for projects.js and events.js routes
2. Reach 15% backend coverage
3. Add frontend tests for core hooks

### Long Term
1. Reach 20% coverage to enable Phase 2
2. Add E2E tests for critical user flows
3. Reduce console.logs to intentional logging only

## Test Results Summary

```
Backend:  27 passed, 0 failed
Frontend: 36 passed, 0 failed
E2E:      12 passed, 0 failed (smoke tests)
```

## Action Items

- [ ] Add auth triple tests to tasks.js route
- [ ] Remove unnecessary console.logs from backend (137 found)
- [ ] Review TODO comments and create issues
- [ ] Monitor vite 7.x release for esbuild fix
